<html>
<head>
    <meta charset="UTF-8">
    <title> Кликер в стиле Sonic The Hedgehog </title>
    <link rel="stylesheet" href="./css/main.css">
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <div id="main">
        <div id="content">
            
            <div class="b-wrapper">
                <div class="b-one" style="width: 100%">
                    <h1> КОЛЕЦ: <span id="counter">0</span></h1> 
                    <h1> В СЕКУНДУ: <span id="background">0</span></h1> 
                    <h1> МНОЖИТЕЛЬ КЛИКА: <span id="factor">1.0</span></h1> 
                </div>
            </div>

            <div class="flex-flow">
                <div class="first">
                    <div class="b-two">
                        <div id="button"> <div class="button-vfx"></div> </div>
                    </div>
                </div>
    
                <div class="second">
                    <div class="cost-sum"></div>
                    <button class="button-close">close</button>
                    <div class="b-three">
                    </div>
                </div>
    
            </div>
            
            <button class="upgrade-button">улутшение</button>
            




        </div>
    </div>
    <!-- <script src="https://cdn.jsdelivr.net/npm/alasql@4"></script> -->
<script>
    // let testd = alasql("CREATE TABLE IF NOT EXISTS users (chatid, username, counts)");

    // var res = alasql("SELECT username FROM users WHERE chatid =  '6197358198'");
    // console.log(res[0]);

    

if (document.body.animate) {
  document.querySelector('#button').addEventListener('click', pop);
}

function pop (e) {
  // Quick check if user clicked the button using a keyboard
  if (e.clientX === 0 && e.clientY === 0) {
    const bbox = document.querySelector('#button').getBoundingClientRect();
    const x = bbox.left + bbox.width / 2;
    const y = bbox.top + bbox.height / 2;
    for (let i = 0; i < 30; i++) {
      // We call the function createParticle 30 times
      // We pass the coordinates of the button for x & y values
      createParticle(x, y);
    }
  } else {
    for (let i = 0; i < 30; i++) {
      // We call the function createParticle 30 times
      // As we need the coordinates of the mouse, we pass them as arguments
      createParticle(e.clientX, e.clientY);
    }
  }
}

function createParticle (x, y) {
  const particle = document.createElement('particle');
  document.body.appendChild(particle);
  
  // Calculate a random size from 5px to 25px
  const size = Math.floor(Math.random() * 20 + 5);
  particle.style.width = `${size}px`;
  particle.style.height = `${size}px`;
  // Generate a random color in a blue/purple palette
  particle.style.background = `hsl(${Math.random() * 90 + 180}, 70%, 60%)`;
  
  // Generate a random x & y destination within a distance of 75px from the mouse
  const destinationX = x + (Math.random() - 0.5) * 2 * 75;
  const destinationY = y + (Math.random() - 0.5) * 2 * 75;

  // Store the animation in a variable as we will need it later
  const animation = particle.animate([
    {
      // Set the origin position of the particle
      // We offset the particle with half its size to center it around the mouse
      transform: `translate(-50%, -50%) translate(${x}px, ${y}px)`,
      opacity: 1
    },
    {
      // We define the final coordinates as the second keyframe
      transform: `translate(${destinationX}px, ${destinationY}px)`,
      opacity: 0
    }
  ], {
    // Set a random duration from 500 to 1500ms
    duration: Math.random() * 1000 + 500,
    easing: 'cubic-bezier(0, .9, .57, 1)',
    // Delay every particle with a random value of 200ms
    delay: Math.random() * 200
  });
  
  // When the animation is complete, remove the element from the DOM
  animation.onfinish = () => {
    particle.remove();
  };
}


</script>
    <script>
        const btn_upgrade = document.querySelector(".upgrade-button")
        const btn_second = document.querySelector(".second")
        const btn_close = document.querySelector(".button-close")

        btn_upgrade.addEventListener("click", ()=> {
            btn_second.classList.add("active-btn")
        })
        btn_close.addEventListener("click", ()=> {
            btn_second.classList.remove("active-btn")
        })
    </script>
    <script src="./js/main.js" defer> </script>
</body>
</html>